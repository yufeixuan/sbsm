# redis 使用说明

## redis 数据结构
### String
##### SETEX key seconds value
- SETEX 是一个原子（atomic）操作， 它可以在同一时间内完成设置值和设置过期时间这两个操作。

### Hash
Hash 数据结构常用于存放java对象数据。

#### 使用 String 格式存储对象的缺点
##### 第一种方式：将用户ID作为查找key,把其他信息封装成一个对象以序列化的方式存储。
- 增加了序列化反序列化的开销。
- 修改其中一项信息时，需要把整个对象取回，增加了读写开销。
- 修改操作需要对并发保护，引入CAS等复杂问题。

##### 第二种方法：用户信息对象有多少成员就存成多少个key-value对。
- 如果存在大量这样的数据，内存浪费还是非常可观的。

#### 数据库与缓存双写情况下应先删除缓存，然后更新数据库。若删除缓存失败则放弃更新数据库。

